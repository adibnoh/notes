# Component as Package

My can create component as npm package. This guide will show you how to create and install this component in your main project.

Our package is going to be private and can only be downloaded via Gitlab.

## Requirement

* [Yarn](https://yarnpkg.com/)
* [Vue CLI](https://cli.vuejs.org/)
* [Vue CLI Tailwind](https://github.com/forsartis/vue-cli-plugin-tailwind)

## Create Package

We need to install Vue CLI globally in our machine

`yarn global add @vue/cli @vue/cli-service-global`

after that we may create a Vue Package

`vue create my-component`

## Package Configuration

### Package JSON

Edit `package.json`

#### Version

Always start your package with lowest version number as possible

```json

"version": "0.0.1",

```

#### Add this build package script

```json

"script": {
    "build-package": "vue-cli-service build --target lib --name web-button ./src/index.js",
}

```

Edit `./src/index.js` (create if not exist)

```js

export { default as MyComponent } from './components/MyComponent.vue'; // import your component

```

When we run command `yarn build-package`. It may generate 4 files:

```

dist/my-component.umd.min.js
dist/my-component.umd.js
dist/my-component.common.js
dist/my-component.css

```

you may edit `vue.config.js` (create if not exist) to disabled css generation in different files

```js

module.exports = {
  css: { extract: false }
}

```

#### Change Main

```json

"main": "dist/web-button.common.js",

```

#### The files hosted by NPM

```json

"files": [
    "dist/*",
    "src/*"
],

```

## Tailwind

We may install tailwind plugin

`vue add tailwind`

Ensure Post CSS config file is correct. This file is auto generated by plugin

```js

// postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};

```

Edit `tailwind.config.js` (create if not exist). Ensure Tailwind config file is as minimal as possible

```js

module.exports = {
  purge: { content: ['./public/**/*.html', './src/**/*.vue'] },
  darkMode: false, // or 'media' or 'class'
  variants: {
  },
  plugins: [
  ],
}

```

## Development

Run `yarn serve` - this command will compile and watch your vue, css, js and html files in src directory. It also boot up localhost site for your preview.

## Deployment

Run `yarn build-package`

Push all source code to gitlab

Ensure to add tag for each version.

## Use Package in Main Project

You may install package via Yarn

`yarn add git+ssh://git@gitlab.com:<package_name>`

`yarn add git+ssh://git@gitlab.com:<package_name>#<tag>` - if you want to target specific tag.

example:

`yarn add git+ssh://git@gitlab.com:graduan/web-vue/button.git#0.1.11`

After install you may import component in your project

```js

import {<component->name>} from "<package.json->name>/src";

```